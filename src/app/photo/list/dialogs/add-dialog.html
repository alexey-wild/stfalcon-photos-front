<md-dialog>
  <md-dialog-content>
    <form class="md-dialog-content">
      <span class="text-danger" ng-show="vm.formError">{{vm.formError}}</span>
      <div class="file-field input-field">
        <md-input-container>
          <input type="file" aria-label="Select photo" ng-model="vm.file" input-file="true" />
          <md-button class="md-fab md-mini" aria-label="Select photo">
            <md-icon class="material-icons" aria-label="Select photo">file_upload</md-icon>
          </md-button>
        </md-input-container>
      </div>
      <span ng-show="vm.file">File: {{vm.file.name}}</span>
      <md-chips ng-model="vm.selectedTags"
                md-autocomplete-snap
                md-transform-chip="vm.transformChip($chip)"
                md-require-match="false">
        <md-autocomplete placeholder="Select or create tag"
                         md-selected-item="vm.selectedTag"
                         md-search-text="vm.searchText"
                         md-items="item in vm.queryTag(vm.searchText)"
                         md-item-text="item.name"
                         md-input-maxlength="255"
                         md-input-maxlength="1"
                         md-select-on-match="true">
          <span md-highlight-text="vm.searchText">{{item.name}}</span>
        </md-autocomplete>
        <md-chip-template>
          <span>
            <strong>{{$chip}}</strong>
          </span>
        </md-chip-template>
      </md-chips>
      </md-content>
    </form>
  </md-dialog-content>

  <md-dialog-actions>
    <md-button ng-click="vm.close()">Cancel</md-button>
    <md-button ng-disabled="!vm.file" ng-click="vm.upload()">Upload</md-button>
  </md-dialog-actions>
</md-dialog>
